<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Company Contact Finder</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // Lucide icons as SVG components
    const Building2 = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/>
        <path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/>
        <path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"/>
        <path d="M10 6h4"/>
        <path d="M10 10h4"/>
        <path d="M10 14h4"/>
        <path d="M10 18h4"/>
      </svg>
    );

    const Mail = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <rect width="20" height="16" x="2" y="4" rx="2"/>
        <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
      </svg>
    );

    const Search = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="11" cy="11" r="8"/>
        <path d="m21 21-4.3-4.3"/>
      </svg>
    );

    const Download = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
        <polyline points="7 10 12 15 17 10"/>
        <line x1="12" x2="12" y1="15" y2="3"/>
      </svg>
    );

    const Loader2 = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="animate-spin">
        <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
      </svg>
    );

    const AlertCircle = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="12" cy="12" r="10"/>
        <line x1="12" x2="12" y1="8" y2="12"/>
        <line x1="12" x2="12.01" y1="16" y2="16"/>
      </svg>
    );

    const CheckCircle = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
        <polyline points="22 4 12 14.01 9 11.01"/>
      </svg>
    );

    const Database = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <ellipse cx="12" cy="5" rx="9" ry="3"/>
        <path d="M3 5V19A9 3 0 0 0 21 19V5"/>
        <path d="M3 12A9 3 0 0 0 21 12"/>
      </svg>
    );

    const ExternalLink = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
        <polyline points="15 3 21 3 21 9"/>
        <line x1="10" x2="21" y1="14" y2="3"/>
      </svg>
    );

    const Trash2 = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M3 6h18"/>
        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
        <line x1="10" x2="10" y1="11" y2="17"/>
        <line x1="14" x2="14" y1="11" y2="17"/>
      </svg>
    );

    function ContactEmailFinder() {
      const [companies, setCompanies] = useState('');
      const [results, setResults] = useState([]);
      const [processing, setProcessing] = useState(false);
      const [currentCompany, setCurrentCompany] = useState('');
      const [progress, setProgress] = useState({ current: 0, total: 0 });
      const [firebaseConfigured, setFirebaseConfigured] = useState(false);
      const [showFirebaseConfig, setShowFirebaseConfig] = useState(false);
      const [firebaseConfig, setFirebaseConfig] = useState({
        apiKey: '',
        authDomain: '',
        databaseURL: '',
        projectId: '',
        storageBucket: '',
        messagingSenderId: '',
        appId: ''
      });

      useEffect(() => {
        // Check if Firebase is already configured from localStorage
        const savedConfig = localStorage.getItem('firebaseConfig');
        if (savedConfig) {
          try {
            const config = JSON.parse(savedConfig);
            initializeFirebase(config);
            setFirebaseConfig(config);
            setFirebaseConfigured(true);
          } catch (e) {
            console.error('Error loading Firebase config:', e);
          }
        }

        // Load saved results from localStorage
        const savedResults = localStorage.getItem('contactFinderResults');
        if (savedResults) {
          setResults(JSON.parse(savedResults));
        }
      }, []);

      const initializeFirebase = (config) => {
        try {
          if (!firebase.apps.length) {
            firebase.initializeApp(config);
          }
          setFirebaseConfigured(true);
          localStorage.setItem('firebaseConfig', JSON.stringify(config));
        } catch (error) {
          console.error('Firebase initialization error:', error);
          alert('Error initializing Firebase: ' + error.message);
        }
      };

      const saveFirebaseConfig = () => {
        if (!firebaseConfig.apiKey || !firebaseConfig.databaseURL) {
          alert('Please provide at least API Key and Database URL');
          return;
        }
        initializeFirebase(firebaseConfig);
        setShowFirebaseConfig(false);
      };

      const saveToFirebase = async (result) => {
        if (!firebaseConfigured) return;

        try {
          const db = firebase.database();
          const timestamp = Date.now();
          const resultRef = db.ref('companyContacts/' + timestamp);
          await resultRef.set({
            ...result,
            timestamp,
            date: new Date().toISOString()
          });
        } catch (error) {
          console.error('Error saving to Firebase:', error);
        }
      };

      const extractEmails = (text) => {
        const emailRegex = /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g;
        const emails = text.match(emailRegex) || [];
        
        // Filter out common non-contact emails
        const filtered = emails.filter(email => {
          const lower = email.toLowerCase();
          return !lower.includes('example.com') && 
                 !lower.includes('localhost') && 
                 !lower.includes('test@') &&
                 !lower.includes('noreply') &&
                 !lower.includes('no-reply') &&
                 !lower.includes('wixpress') &&
                 !lower.includes('sentry.io') &&
                 !lower.includes('.png') &&
                 !lower.includes('.jpg');
        });
        
        // Prioritize contact-related emails
        const contactKeywords = ['info', 'contact', 'hello', 'support', 'sales', 'inquiries', 'general', 'help', 'business', 'service'];
        const priorityEmails = filtered.filter(email => 
          contactKeywords.some(keyword => email.toLowerCase().includes(keyword))
        );
        
        return [...new Set(priorityEmails.length > 0 ? priorityEmails : filtered)];
      };

      const fetchWebPage = async (url) => {
        try {
          // Use a CORS proxy to fetch the webpage
          const proxyUrl = 'https://api.allorigins.win/raw?url=';
          const response = await fetch(proxyUrl + encodeURIComponent(url), {
            timeout: 10000
          });
          
          if (!response.ok) {
            throw new Error('Failed to fetch page');
          }
          
          const html = await response.text();
          return html;
        } catch (error) {
          console.error('Error fetching page:', error);
          return '';
        }
      };

      const extractEmailsFromHTML = (html) => {
        if (!html) return [];
        
        // Remove script and style tags
        let cleanHtml = html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '');
        cleanHtml = cleanHtml.replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi, '');
        
        // Look for mailto links first (most reliable)
        const mailtoRegex = /mailto:([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/gi;
        const mailtoMatches = [...cleanHtml.matchAll(mailtoRegex)];
        const mailtoEmails = mailtoMatches.map(match => match[1]);
        
        // Extract all emails from text
        const allEmails = extractEmails(cleanHtml);
        
        // Combine with mailto emails having higher priority
        return [...new Set([...mailtoEmails, ...allEmails])];
      };

      const searchCompanyWebsite = async (companyName) => {
        try {
          // Step 1: Search DuckDuckGo for the company's official website
          const searchQuery = encodeURIComponent(`${companyName} official website`);
          const ddgUrl = `https://api.duckduckgo.com/?q=${searchQuery}&format=json&no_html=1&skip_disambig=1`;
          
          let websiteUrl = '';
          
          try {
            const searchResponse = await fetch(ddgUrl);
            const searchData = await searchResponse.json();
            
            // Try to extract URL from DuckDuckGo response
            if (searchData.AbstractURL) {
              websiteUrl = searchData.AbstractURL;
            } else if (searchData.RelatedTopics && searchData.RelatedTopics.length > 0) {
              // Try to find URL in related topics
              for (const topic of searchData.RelatedTopics) {
                if (topic.FirstURL) {
                  websiteUrl = topic.FirstURL;
                  break;
                }
              }
            }
          } catch (ddgError) {
            console.error('DuckDuckGo search error:', ddgError);
          }

          if (!websiteUrl) {
            return { 
              companyName, 
              status: 'No website found', 
              emails: [], 
              url: '',
              note: 'Could not find company website automatically'
            };
          }

          // Step 2: Fetch the main website and look for emails
          let allEmails = [];
          
          // Fetch homepage
          const mainHtml = await fetchWebPage(websiteUrl);
          if (mainHtml) {
            const mainEmails = extractEmailsFromHTML(mainHtml);
            allEmails.push(...mainEmails);
          }

          // Step 3: Try multiple common contact page variations
          const contactPaths = [
            '/contact',
            '/contact-us',
            '/contactus',
            '/contact.html',
            '/about',
            '/about-us',
            '/aboutus',
            '/about.html',
            '/support',
            '/help',
            '/get-in-touch',
            '/reach-us',
            '/company/contact'
          ];
          
          for (const path of contactPaths) {
            try {
              const contactUrl = websiteUrl.replace(/\/$/, '') + path;
              const pageHtml = await fetchWebPage(contactUrl);
              if (pageHtml) {
                const pageEmails = extractEmailsFromHTML(pageHtml);
                allEmails.push(...pageEmails);
              }
              // Small delay between requests
              await new Promise(resolve => setTimeout(resolve, 500));
            } catch (e) {
              // Ignore errors on contact pages
              console.log(`Could not fetch ${path}`);
            }
          }

          const uniqueEmails = [...new Set(allEmails)];
          
          // Sort emails to prioritize contact emails
          const contactKeywords = ['info', 'contact', 'hello', 'support', 'sales', 'inquiries', 'general', 'help', 'business'];
          uniqueEmails.sort((a, b) => {
            const aIsContact = contactKeywords.some(kw => a.toLowerCase().includes(kw));
            const bIsContact = contactKeywords.some(kw => b.toLowerCase().includes(kw));
            if (aIsContact && !bIsContact) return -1;
            if (!aIsContact && bIsContact) return 1;
            return 0;
          });
          
          return {
            companyName,
            status: uniqueEmails.length > 0 ? 'Found' : 'No emails found',
            emails: uniqueEmails.slice(0, 5),
            url: websiteUrl,
            note: uniqueEmails.length > 0 ? `Found ${uniqueEmails.length} email(s)` : 'No public contact emails found. Try visiting website directly.'
          };

        } catch (error) {
          return {
            companyName,
            status: 'Error',
            emails: [],
            url: '',
            note: error.message
          };
        }
      };

      const processCompanies = async () => {
        const companyList = companies.split('\n').filter(c => c.trim());
        if (companyList.length === 0) {
          alert('Please enter at least one company name');
          return;
        }

        setProcessing(true);
        setResults([]);
        setProgress({ current: 0, total: companyList.length });

        const newResults = [];

        for (let i = 0; i < companyList.length; i++) {
          const company = companyList[i].trim();
          setCurrentCompany(company);
          setProgress({ current: i + 1, total: companyList.length });

          const result = await searchCompanyWebsite(company);
          newResults.push(result);
          setResults([...newResults]);

          // Save to Firebase if configured
          if (firebaseConfigured) {
            await saveToFirebase(result);
          }

          // Save to localStorage
          localStorage.setItem('contactFinderResults', JSON.stringify(newResults));

          // Add delay to be respectful to servers
          if (i < companyList.length - 1) {
            await new Promise(resolve => setTimeout(resolve, 3000));
          }
        }

        setProcessing(false);
        setCurrentCompany('');
      };

      const exportToCSV = () => {
        const headers = ['Company Name', 'Status', 'Website', 'Email Addresses', 'Notes'];
        const rows = results.map(r => [
          r.companyName,
          r.status,
          r.url,
          r.emails.join('; '),
          r.note || ''
        ]);

        const csvContent = [
          headers.join(','),
          ...rows.map(row => row.map(cell => `"${cell}"`).join(','))
        ].join('\n');

        const blob = new Blob([csvContent], { type: 'text/csv' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'company_contacts.csv';
        a.click();
      };

      const loadSampleData = () => {
        setCompanies('Anthropic\nOpenAI\nGoogle\nMicrosoft\nAmazon');
      };

      const clearLocalStorage = () => {
        if (confirm('Are you sure you want to clear all saved results and Firebase configuration? This cannot be undone.')) {
          localStorage.removeItem('contactFinderResults');
          localStorage.removeItem('firebaseConfig');
          setResults([]);
          setFirebaseConfigured(false);
          setFirebaseConfig({
            apiKey: '',
            authDomain: '',
            databaseURL: '',
            projectId: '',
            storageBucket: '',
            messagingSenderId: '',
            appId: ''
          });
          alert('Local storage cleared successfully!');
        }
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
          <div className="max-w-6xl mx-auto">
            <div className="bg-white rounded-lg shadow-xl p-8">
              <div className="flex items-center justify-between mb-6 flex-wrap gap-3">
                <div className="flex items-center gap-3">
                  <Building2 />
                  <h1 className="text-3xl font-bold text-gray-800">Company Contact Finder</h1>
                </div>
                <div className="flex gap-2 flex-wrap">
                  <button
                    onClick={clearLocalStorage}
                    className="flex items-center gap-2 px-4 py-2 bg-red-100 text-red-700 hover:bg-red-200 rounded-lg transition-colors"
                    title="Clear all saved data"
                  >
                    <Trash2 />
                    <span>Clear Data</span>
                  </button>
                  <button
                    onClick={() => setShowFirebaseConfig(!showFirebaseConfig)}
                    className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${
                      firebaseConfigured 
                        ? 'bg-green-100 text-green-700 hover:bg-green-200' 
                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                    }`}
                  >
                    <Database />
                    <span>{firebaseConfigured ? 'Firebase Connected' : 'Configure Firebase'}</span>
                  </button>
                </div>
              </div>

              {showFirebaseConfig && (
                <div className="mb-6 p-4 bg-gray-50 border border-gray-300 rounded-lg">
                  <h3 className="font-semibold mb-3">Firebase Configuration (Optional)</h3>
                  <div className="grid grid-cols-2 gap-3 mb-3">
                    <input
                      type="text"
                      placeholder="API Key"
                      value={firebaseConfig.apiKey}
                      onChange={(e) => setFirebaseConfig({...firebaseConfig, apiKey: e.target.value})}
                      className="px-3 py-2 border border-gray-300 rounded"
                    />
                    <input
                      type="text"
                      placeholder="Auth Domain"
                      value={firebaseConfig.authDomain}
                      onChange={(e) => setFirebaseConfig({...firebaseConfig, authDomain: e.target.value})}
                      className="px-3 py-2 border border-gray-300 rounded"
                    />
                    <input
                      type="text"
                      placeholder="Database URL *"
                      value={firebaseConfig.databaseURL}
                      onChange={(e) => setFirebaseConfig({...firebaseConfig, databaseURL: e.target.value})}
                      className="px-3 py-2 border border-gray-300 rounded"
                    />
                    <input
                      type="text"
                      placeholder="Project ID"
                      value={firebaseConfig.projectId}
                      onChange={(e) => setFirebaseConfig({...firebaseConfig, projectId: e.target.value})}
                      className="px-3 py-2 border border-gray-300 rounded"
                    />
                    <input
                      type="text"
                      placeholder="Storage Bucket"
                      value={firebaseConfig.storageBucket}
                      onChange={(e) => setFirebaseConfig({...firebaseConfig, storageBucket: e.target.value})}
                      className="px-3 py-2 border border-gray-300 rounded"
                    />
                    <input
                      type="text"
                      placeholder="Messaging Sender ID"
                      value={firebaseConfig.messagingSenderId}
                      onChange={(e) => setFirebaseConfig({...firebaseConfig, messagingSenderId: e.target.value})}
                      className="px-3 py-2 border border-gray-300 rounded"
                    />
                    <input
                      type="text"
                      placeholder="App ID"
                      value={firebaseConfig.appId}
                      onChange={(e) => setFirebaseConfig({...firebaseConfig, appId: e.target.value})}
                      className="px-3 py-2 border border-gray-300 rounded col-span-2"
                    />
                  </div>
                  <button
                    onClick={saveFirebaseConfig}
                    className="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700"
                  >
                    Save Configuration
                  </button>
                </div>
              )}

              <div className="mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                <div className="flex items-start gap-2">
                  <AlertCircle />
                  <div className="text-sm text-blue-800">
                    <p className="font-semibold mb-1">How it works:</p>
                    <p>This tool attempts to find company websites and extract publicly listed contact emails. It uses free services and web scraping. Results may vary - some websites block automated access. For best results, you may need to manually verify the information.</p>
                    <p className="mt-2 text-xs">Note: This tool respects robots.txt and adds delays between requests. Results are saved locally in your browser.</p>
                  </div>
                </div>
              </div>

              <div className="grid md:grid-cols-2 gap-6 mb-6">
                <div>
                  <label className="block text-sm font-semibold text-gray-700 mb-2">
                    Company Names (one per line)
                  </label>
                  <textarea
                    value={companies}
                    onChange={(e) => setCompanies(e.target.value)}
                    placeholder="Enter company names, one per line&#10;Example:&#10;Anthropic&#10;OpenAI&#10;Google"
                    className="w-full h-64 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
                    disabled={processing}
                  />
                  <div className="flex gap-2 mt-2">
                    <button
                      onClick={loadSampleData}
                      className="text-sm text-indigo-600 hover:text-indigo-800"
                      disabled={processing}
                    >
                      Load sample data
                    </button>
                  </div>
                </div>

                <div className="flex flex-col justify-between">
                  <div>
                    <h3 className="text-sm font-semibold text-gray-700 mb-2">Processing Status</h3>
                    {processing ? (
                      <div className="space-y-3">
                        <div className="flex items-center gap-2 text-indigo-600">
                          <Loader2 />
                          <span>Processing: {currentCompany}</span>
                        </div>
                        <div className="w-full bg-gray-200 rounded-full h-2">
                          <div 
                            className="bg-indigo-600 h-2 rounded-full transition-all duration-300"
                            style={{ width: `${(progress.current / progress.total) * 100}%` }}
                          />
                        </div>
                        <p className="text-sm text-gray-600">
                          {progress.current} of {progress.total} companies processed
                        </p>
                      </div>
                    ) : (
                      <p className="text-gray-500">Ready to process companies</p>
                    )}
                  </div>

                  <div className="space-y-3 mt-6">
                    <button
                      onClick={processCompanies}
                      disabled={processing || !companies.trim()}
                      className="w-full flex items-center justify-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"
                    >
                      <Search />
                      {processing ? 'Processing...' : 'Find Contact Information'}
                    </button>

                    {results.length > 0 && !processing && (
                      <button
                        onClick={exportToCSV}
                        className="w-full flex items-center justify-center gap-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors"
                      >
                        <Download />
                        Export to CSV
                      </button>
                    )}
                  </div>
                </div>
              </div>

              {results.length > 0 && (
                <div>
                  <h3 className="text-xl font-semibold text-gray-800 mb-4">Results</h3>
                  <div className="overflow-x-auto">
                    <table className="w-full border-collapse">
                      <thead>
                        <tr className="bg-gray-50">
                          <th className="border border-gray-300 px-4 py-2 text-left text-sm font-semibold">Company</th>
                          <th className="border border-gray-300 px-4 py-2 text-left text-sm font-semibold">Status</th>
                          <th className="border border-gray-300 px-4 py-2 text-left text-sm font-semibold">Website</th>
                          <th className="border border-gray-300 px-4 py-2 text-left text-sm font-semibold">Contact Emails</th>
                          <th className="border border-gray-300 px-4 py-2 text-left text-sm font-semibold">Notes</th>
                        </tr>
                      </thead>
                      <tbody>
                        {results.map((result, idx) => (
                          <tr key={idx} className="hover:bg-gray-50">
                            <td className="border border-gray-300 px-4 py-2">{result.companyName}</td>
                            <td className="border border-gray-300 px-4 py-2">
                              <span className={`inline-flex items-center gap-1 text-sm ${
                                result.status === 'Found' ? 'text-green-600' : 'text-gray-600'
                              }`}>
                                {result.status === 'Found' && <CheckCircle />}
                                {result.status}
                              </span>
                            </td>
                            <td className="border border-gray-300 px-4 py-2">
                              {result.url && (
                                <a 
                                  href={result.url} 
                                  target="_blank" 
                                  rel="noopener noreferrer"
                                  className="text-indigo-600 hover:underline text-sm flex items-center gap-1"
                                >
                                  {result.url.replace(/^https?:\/\//, '').slice(0, 30)}
                                  <ExternalLink />
                                </a>
                              )}
                            </td>
                            <td className="border border-gray-300 px-4 py-2">
                              {result.emails.length > 0 ? (
                                <div className="flex flex-wrap gap-1">
                                  {result.emails.map((email, i) => (
                                    <span key={i} className="inline-flex items-center gap-1 bg-indigo-50 text-indigo-700 px-2 py-1 rounded text-sm">
                                      <Mail />
                                      {email}
                                    </span>
                                  ))}
                                </div>
                              ) : (
                                <span className="text-gray-400 text-sm">No emails found</span>
                              )}
                            </td>
                            <td className="border border-gray-300 px-4 py-2 text-xs text-gray-600">
                              {result.note}
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                </div>
              )}
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.render(<ContactEmailFinder />, document.getElementById('root'));
  </script>
</body>
</html>
